/*! For license information please see backressure.js.LICENSE.txt */
(()=>{"use strict";var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};function r(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function e(t){return"function"==typeof t}var n=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack,n=t},get useDeprecatedSynchronousErrorHandling(){return n}};function s(t){setTimeout((function(){throw t}),0)}var o={closed:!0,next:function(t){},error:function(t){if(i.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete:function(){}},u=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();var c=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,r){return r+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),h=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var r,n;if(!this.closed){var i=this,s=i._parentOrParents,o=i._ctorUnsubscribe,h=i._unsubscribe,l=i._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,s instanceof t)s.remove(this);else if(null!==s)for(var f=0;f<s.length;++f)s[f].remove(this);if(e(h)){o&&(this._unsubscribe=void 0);try{h.call(this)}catch(t){r=t instanceof c?a(t.errors):[t]}}if(u(l)){f=-1;for(var p=l.length;++f<p;){var d=l[f];if(null!==(n=d)&&"object"==typeof n)try{d.unsubscribe()}catch(t){r=r||[],t instanceof c?r=r.concat(a(t.errors)):r.push(t)}}}if(r)throw new c(r)}},t.prototype.add=function(r){var e=r;if(!r)return t.EMPTY;switch(typeof r){case"function":e=new t(r);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var n=e;(e=new t)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+r+" added to Subscription.")}var i=e._parentOrParents;if(null===i)e._parentOrParents=this;else if(i instanceof t){if(i===this)return e;e._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return e;i.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[e]:s.push(e),e},t.prototype.remove=function(t){var r=this._subscriptions;if(r){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function a(t){return t.reduce((function(t,r){return t.concat(r instanceof c?r.errors:r)}),[])}var l=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),f=function(t){function e(r,n,i){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=o;break;case 1:if(!r){s.destination=o;break}if("object"==typeof r){r instanceof e?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new p(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new p(s,r,n,i)}return s}return r(e,t),e.prototype[l]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(h),p=function(t){function n(r,n,i,s){var u,c=t.call(this)||this;c._parentSubscriber=r;var h=c;return e(n)?u=n:n&&(u=n.next,i=n.error,s=n.complete,n!==o&&(e((h=Object.create(n)).unsubscribe)&&c.add(h.unsubscribe.bind(h)),h.unsubscribe=c.unsubscribe.bind(c))),c._context=h,c._next=u,c._error=i,c._complete=s,c}return r(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;i.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,e=i.useDeprecatedSynchronousErrorHandling;if(this._error)e&&r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)e?(r.syncErrorValue=t,r.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;s(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};i.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?(this.__tryOrSetError(r,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),i.useDeprecatedSynchronousErrorHandling)throw t;s(t)}},n.prototype.__tryOrSetError=function(t,r,e){if(!i.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,e)}catch(r){return i.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(f),d=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function b(t){return t}function y(t){return 0===t.length?b:1===t.length?t[0]:function(r){return t.reduce((function(t,r){return r(t)}),r)}}var v=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,s=function(t,r,e){if(t){if(t instanceof f)return t;if(t[l])return t[l]()}return t||r||e?new f(t,r,e):new f(o)}(t,r,e);if(n?s.add(n.call(s,this.source)):s.add(this.source||i.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),i.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){i.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=r),function(t){for(;t;){var r=t,e=r.closed,n=r.destination,i=r.isStopped;if(e||i)return!1;t=n&&n instanceof f?n:null}return!0}(t)?t.error(r):console.warn(r)}},t.prototype.forEach=function(t,r){var e=this;return new(r=_(r))((function(r,n){var i;i=e.subscribe((function(r){try{t(r)}catch(t){n(t),i&&i.unsubscribe()}}),n,r)}))},t.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},t.prototype[d]=function(){return this},t.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?this:y(t)(this)},t.prototype.toPromise=function(t){var r=this;return new(t=_(t))((function(t,e){var n;r.subscribe((function(t){return n=t}),(function(t){return e(t)}),(function(){return t(n)}))}))},t.create=function(r){return new t(r)},t}();function _(t){if(t||(t=i.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var g=function(){function t(t,r){this.project=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new w(t,this.project,this.thisArg))},t}(),w=function(t){function e(r,e,n){var i=t.call(this,r)||this;return i.project=e,i.count=0,i.thisArg=n||i,i}return r(e,t),e.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(r)},e}(f);function E(t,r,e,n,i){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){var o=t;t.addEventListener(r,e,i),s=function(){return o.removeEventListener(r,e,i)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){var u=t;t.on(r,e),s=function(){return u.off(r,e)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){var c=t;t.addListener(r,e),s=function(){return c.removeListener(r,e)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var h=0,a=t.length;h<a;h++)E(t[h],r,e,n,i)}n.add(s)}var S=function(t){function e(r,e){var n=t.call(this,r,e)||this;return n.scheduler=r,n.work=e,n.pending=!1,n}return r(e,t),e.prototype.schedule=function(t,r){if(void 0===r&&(r=0),this.closed)return this;this.state=t;var e=this.id,n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(n,this.id,r),this},e.prototype.requestAsyncId=function(t,r,e){return void 0===e&&(e=0),setInterval(t.flush.bind(t,this),e)},e.prototype.recycleAsyncId=function(t,r,e){if(void 0===e&&(e=0),null!==e&&this.delay===e&&!1===this.pending)return r;clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(t,r);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var e=!1,n=void 0;try{this.work(t)}catch(t){e=!0,n=!!t&&t||new Error(t)}if(e)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,r=this.scheduler,e=r.actions,n=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&e.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null},e}(function(t){function e(r,e){return t.call(this)||this}return r(e,t),e.prototype.schedule=function(t,r){return void 0===r&&(r=0),this},e}(h)),m=function(){function t(r,e){void 0===e&&(e=t.now),this.SchedulerAction=r,this.now=e}return t.prototype.schedule=function(t,r,e){return void 0===r&&(r=0),new this.SchedulerAction(this,t).schedule(e,r)},t.now=function(){return Date.now()},t}(),x=new(function(t){function e(r,n){void 0===n&&(n=m.now);var i=t.call(this,r,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r(e,t),e.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(t){var r=this.actions;if(this.active)r.push(t);else{var e;this.active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=r.shift());if(this.active=!1,e){for(;t=r.shift();)t.unsubscribe();throw e}}},e}(m))(S),T=function(){function t(t,r){this.dueTime=t,this.scheduler=r}return t.prototype.call=function(t,r){return r.subscribe(new O(t,this.dueTime,this.scheduler))},t}(),O=function(t){function e(r,e,n){var i=t.call(this,r)||this;return i.dueTime=e,i.scheduler=n,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(V,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(f);function V(t){t.debouncedNext()}var P={leading:!0,trailing:!1},A=function(){function t(t,r,e,n){this.duration=t,this.scheduler=r,this.leading=e,this.trailing=n}return t.prototype.call=function(t,r){return r.subscribe(new D(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),D=function(t){function e(r,e,n,i,s){var o=t.call(this,r)||this;return o.duration=e,o.scheduler=n,o.leading=i,o.trailing=s,o._hasTrailingValue=!1,o._trailingValue=null,o}return r(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(j,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(f);function j(t){t.subscriber.clearThrottle()}var H=function(){function t(t,r){this.bufferSize=t,this.startBufferEvery=r,this.subscriberClass=r&&t!==r?I:k}return t.prototype.call=function(t,r){return r.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),k=function(t){function e(r,e){var n=t.call(this,r)||this;return n.bufferSize=e,n.buffer=[],n}return r(e,t),e.prototype._next=function(t){var r=this.buffer;r.push(t),r.length==this.bufferSize&&(this.destination.next(r),this.buffer=[])},e.prototype._complete=function(){var r=this.buffer;r.length>0&&this.destination.next(r),t.prototype._complete.call(this)},e}(f),I=function(t){function e(r,e,n){var i=t.call(this,r)||this;return i.bufferSize=e,i.startBufferEvery=n,i.buffers=[],i.count=0,i}return r(e,t),e.prototype._next=function(t){var r=this,e=r.bufferSize,n=r.startBufferEvery,i=r.buffers,s=r.count;this.count++,s%n==0&&i.push([]);for(var o=i.length;o--;){var u=i[o];u.push(t),u.length===e&&(i.splice(o,1),this.destination.next(u))}},e.prototype._complete=function(){for(var r=this.buffers,e=this.destination;r.length>0;){var n=r.shift();n.length>0&&e.next(n)}t.prototype._complete.call(this)},e}(f);const L=function t(r,n,i,s){return e(i)&&(s=i,i=void 0),s?t(r,n,i).pipe((o=function(t){return u(t)?s.apply(void 0,t):s(t)},function(t){return t.lift(new g(o,undefined))})):new v((function(t){E(r,n,(function(r){arguments.length>1?t.next(Array.prototype.slice.call(arguments)):t.next(r)}),t,i)}));var o}(document,"mousemove");var z,U;L.pipe((1e3,void 0===z&&(z=x),function(t){return t.lift(new T(1e3,z))})),L.pipe(function(t,r,e){return void 0===r&&(r=x),void 0===e&&(e=P),function(t){return t.lift(new A(1e3,r,e.leading,e.trailing))}}()),L.pipe((20,void 0===U&&(U=null),function(t){return t.lift(new H(20,U))})).subscribe((t=>{const r=document.createElement("h3");r.innerText=`😀 ${t}`,document.body.appendChild(r)}))})();